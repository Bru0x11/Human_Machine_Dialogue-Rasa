version: "3.1"

stories:
- story: greeting
  steps:
  - intent: greetings
  - action: utter_greet
  - action: utter_self_introduction
  - action: utter_decision

# TASK #1
- story: begin_asking_questions
  steps:
  - intent: ask_movie_question
  - action: utter_ask_whatever
  - intent: deny
  - checkpoint: continue_using_bot

# TASK #2
- story: recommendation_without_movie
  steps:
  - intent: ask_recommendation_without_movie
  - action: retrieve_movie_information_form
  - active_loop: retrieve_movie_information_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_recommendation_without_movie
  - action: utter_return_recommended_movie


- story: recommendation_with_movie
  steps:
  - intent: ask_recommendation_with_movie
  - action: action_recommendation_with_movie
  - action: utter_return_recommended_movie
  - checkpoint: continue_using_bot

# DO YOU WANT TO CONTINUE?
- story: continue_yes
  steps:
    - checkpoint: continue_using_bot
    - action: utter_ask_to_continue
    - intent: affirm #aggiungere storia dove invece di dire si qua, dico direttamente cosa voglio fare
    - action: utter_decision

- story: continue_no
  steps: 
    - checkpoint: continue_using_bot
    - action: utter_ask_to_continue
    - intent: deny
    - action: utter_user_praise
    - checkpoint: ending

# ENDING
- story: chatbot_end
  steps:
    - checkpoint: ending
    - action: utter_goodbye
