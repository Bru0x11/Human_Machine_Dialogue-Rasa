version: "3.1"

intents:
  - greetings
  - goodbye
  - affirm
  - deny
  - out_of_scope
  - ask_movie_question
  - ask_recommendation_without_movie
  - ask_recommendation_with_movie
  - ask_movie_with_similar_plot
  - movie_genre
  - movie_director
  - movie_composer
  - movie_cast
  - movie_plot
  - movie_release_date
  - movie_budget
  - movie_runtime
  - movie_revenue
  - movie_rating
  - movie_distributor
  - movie_producer
  - movie_genre+movie_producer
  - just_genre
  - just_cast
  - just_rating
  - just_year
  - just_movie_time_period

entities:
  - movie_name
  - genre
  - composer_name
  - director_name
  - producer_name
  - distributor
  - release_date
  - budget
  - cast
  - runtime
  - revenue
  - rating
  - number_of_actors
  - runtime_time_period #tells me if the lenght is longer or shorter than the one specified
  
slots:
  movie_name:
    type: text
    mappings:
      - type: from_entity
        entity: movie_name
  genre:
    type: text
    mappings:
      - type: from_entity
        entity: genre
  release_date:
    type: text
    mappings:
      - type: from_entity
        entity: release_date
  budget:
    type: float
    mappings:
      - type: from_entity
        entity: budget
  runtime:
    type: float
    mappings:
      - type: from_entity
        entity: runtime
  revenue:
    type: float
    mappings:
      - type: from_entity
        entity: revenue
  plot:
    type: text
    mappings:
      - type: custom
  rating:
    type: float
    mappings:
      - type: from_entity
        entity: rating
  composer_name:
    type: text
    mappings:
      - type: from_entity
        entity: composer_name
  director_name:
    type: text
    mappings:
      - type: from_entity
        entity: director_name
  producer_name:
    type: text
    mappings:
      - type: from_entity
        entity: producer_name
  number_of_actors:
    type: any
    mappings:
      - type: from_entity
        entity: number_of_actors
  cast:
    type: any
    mappings:
      - type: from_entity
        entity: cast
  is_already_watched:
    type: bool
    mappings:
    - type: custom
      value: true
      intent: affirm
  index_already_watched:
    type: float
    mappings:
      - type: custom
  copy_of_movie_name:
    type: text
    mappings:
      - type: custom
  is_before:
    type: text
    mappings:
      - type: from_text
        intent: just_movie_time_period
        conditions: 
          - active_loop: retrieve_movie_information_form
  runtime_time_period:
    type: text
    mappings:
      - type: from_entity
        entity: runtime_time_period
  is_title_received:
    type: bool
    mappings:
    - type: custom
      value: true #diventa true quando vado in task 1, devo metterlo in false quando va in task 2
      intent: ask_movie_question
  is_plot_received:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
        - active_loop: retrieve_plot_form
  wiki_link:
    type: text
    mappings:
      - type: custom

responses:
  utter_greet:
  - text: "Hello! I'm Amadeus, your movie assistant. It's great to meet you! "

  utter_goodbye:
  - text: "Goodbye! It was great chatting with you. Feel free to come back anytime if you have more questions or just want to chat about movies. Have a great day!"

  utter_self_introduction:
  - text: "I'm here to be your ultimate guide to the world of cinema. Whether you're a die-hard film buff or just looking for a casual movie night suggestion, I'm here to assist you with all your movie-related needs. From classic blockbusters to indie gems, I've got recommendations to suit every taste. So let's dive in and explore the wonderful world of movies together!"

  utter_decision:
  - text: "What would you like to do?"    

  utter_ask_whatever:
  - text: "What would you like to know?"

  utter_keep_asking:
  - text: "Do you want to know something else about {movie_name} or other films?"

  utter_out_of_scope:
  - text: "I'm sorry, but that question is out of my scope as a movie assistant. My purpose is to help you with anything related to movies, such as providing recommendations, movie reviews, trivia, and other related information. If you have any movie-related questions, I'd be happy to help you out!"

  utter_return_movie_name:
  - text: "The name of the movie is {movie_name}"

  utter_return_movie_genre:
  - text: "The genre of {movie_name} is {genre}"

  utter_return_movie_release_date:
  - text: "The release_date of the movie {movie_name} is {release_date}"

  utter_return_movie_budget:
  - text: "The total budget for {movie_name} is {budget}"

  utter_return_movie_runtime:
  - text: "The {movie_name} lasts {runtime}"

  utter_return_movie_revenue:
  - text: "The revenue of {movie_name} amounts to {revenue}"

  utter_return_movie_plot:
  - text: "The plot of {movie_name} is the following: {plot}"

  utter_return_movie_rating:
  - text: "The rating of {movie_name} is {rating}"

  utter_return_movie_director:
  - text: "The director of {movie_name} is {director_name}"

  utter_return_movie_producer:
  - text: "The producer of {movie_name} is {producer_name}"

  utter_return_movie_composer:
  - text: "The composer of {movie_name} is {composer_name}"

  utter_return_movie_cast:
  - text: "Here is the list of {number_of_actors} actors: {cast}"

  utter_finished_information:
  - text: "You asked all the information I know about {movie_name}"

  utter_return_recommended_movie:
  - text: "I recommend you the movie {movie_name} released on {release_date}. The plot is the following: {plot}"

  utter_ask_is_already_watched:
  - text: "Have you already watched this movie?"

  utter_ask_genre:
  - text: "What kind of genre would you like?"

  utter_ask_cast:
  - text: "Would you like a certain actor to be in the movie?"

  utter_ask_runtime:
  - text: "How long would should the movie last?"

  utter_ask_rating:
  - text: "What is the minimum rating that you want for the movie?"

  utter_ask_release_date:
  - text: "Can you tell me a release date for the movie?"

  utter_ask_is_before:
  - text: "Would you like it to be before or after the year {release_date}?"
    
  utter_ask_runtime_time_period:
  - text: "Would you like it to be longer or shorter with respect to the runtime {runtime}?"
    buttons:
    - title: "Shorter"
      payload: "/runtime_time_period"
    - title: "Longer"
      payload: "/runtime_time_period"

  utter_ask_is_plot_received:
  - text: "Can you describe the plot, please?"

  utter_return_similar_movie:
  - text: "The request that has the closest resemblance to yours is {movie_name} directed by {director_name}. The plot is the following: {plot}. For more information check the link: {wiki_link}"

  utter_user_praise:
  - text: "Thanks for using this tool!"

  utter_ask_to_continue:
  - text: "Would you like to do something else?"

  utter_still_to_implement:
  - text: "Still to implement!"

  utter_prova:
  - text: "Sono nel posto giusto"

actions:
  - utter_greet
  - utter_goodbye
  - utter_self_introduction
  - utter_return_movie_genre
  - utter_return_movie_composer
  - utter_return_movie_release_date
  - utter_return_movie_budget
  - utter_return_movie_runtime
  - utter_return_movie_revenue
  - utter_return_movie_plot
  - utter_return_movie_rating
  - utter_return_movie_director
  - utter_out_of_scope
  - utter_ask_whatever
  - utter_prova
  - action_retrieve_genre
  - action_retrieve_director
  - action_retrieve_release_date
  - action_retrieve_budget
  - action_retrieve_runtime
  - action_retrieve_revenue
  - action_retrieve_plot
  - action_retrieve_rating
  - action_retrieve_composer
  - action_retrieve_producer
  - action_retrieve_cast
  - action_recommendation_with_movie
  - action_recommendation_without_movie
  - action_reset_slots
  - action_obtain_movie_from_plot

forms:
  already_watched_form:
    required_slots:
      - is_already_watched
  retrieve_movie_information_form:
    required_slots:
      - genre
      #- director_name
      - cast
      - rating
      - release_date
      - is_before
  retrieve_plot_form:
    required_slots:
      - is_plot_received
  
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
